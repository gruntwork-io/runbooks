---
title: Generated Files
sidebar:
  order: 5
---

import { Aside, FileTree } from '@astrojs/starlight/components';

When you use a Runbook, files are generated locally on your machine. This page explains how file generation works and where those files end up.

## How files are generated

Files can be generated in two ways:

### 1. Template blocks

The [Template](/authoring/blocks/template/) and [TemplateInline](/authoring/blocks/templateinline/) blocks generate files from [Boilerplate templates](/authoring/boilerplate/). When you fill in the form fields and click "Generate", the template engine processes your inputs and creates the output files.

```mdx
<Template id="vpc-setup" path="templates/vpc" />
```

Template blocks automatically re-render when you change input values, so your generated files stay in sync with the form.

### 2. Command blocks with $RUNBOOK_FILES

[Command](/authoring/blocks/command/) blocks can write files to the `$RUNBOOK_FILES` environment variable to capture them:

```mdx
<Command 
  id="export-terraform"
  command={`tofu output -json > "$RUNBOOK_FILES/tf-outputs.json"`}
  title="Export Terraform outputs"
/>
```

Any files written to `$RUNBOOK_FILES` automatically appear in your generated files after the command completes successfully.

## Where files are stored

Generated files are persisted to a folder on your local machine—they're not ephemeral or stored in memory.

### Default location

By default, generated files are written to a `generated/` folder in the working directory (the directory you run the `runbooks` command from):

<FileTree>
- **generated/** ← Created in your working directory
  - main.tf
  - variables.tf
  - outputs.tf
</FileTree>

### Customizing the working directory

The working directory is the base directory for all file operations. By default, it's the current directory where you run the command. You can customize it:

```bash
# Use a specific working directory
runbooks open my-runbook --working-dir /path/to/project

# Use an isolated temporary directory (auto-cleaned on exit)
runbooks open my-runbook --working-dir-tmp
```

<Aside type="tip">
The `--working-dir-tmp` flag is useful for sandboxed execution where you don't want generated files to persist.
</Aside>

### Customizing the output path

The output path specifies where generated files are written, relative to the working directory:

```bash
# Write to a custom folder (within working directory)
runbooks open my-runbook --output-path ./infrastructure

# Nested subdirectory
runbooks open my-runbook --output-path ./projects/acme/infra

# Combined with working directory
runbooks open my-runbook --working-dir /tmp/sandbox --output-path output
# Files written to: /tmp/sandbox/output/
```

<Aside type="tip">
These flags work with all Runbooks commands: `open`, `serve`, and `watch`.
</Aside>

### Subdirectories within templates

Within a runbook, you can organize generated files into subdirectories:

- **Template blocks**: The directory structure of your template folder is preserved in the output.
- **TemplateInline blocks**: Use the `outputPath` prop to specify a path like `config/app.yaml`.
- **Command/Check blocks**: Create subdirectories within `$RUNBOOK_FILES`.

```bash
# In your command script
mkdir -p "$RUNBOOK_FILES/config"
echo '{}' > "$RUNBOOK_FILES/config/app.json"
```

## Viewing generated files

When files are generated, they appear in the **file panel** on the right side of the Runbooks UI. You can:

- Browse the file tree
- Click files to view their contents
- Copy file contents to clipboard
- See which files changed after each render

## Security: Where files can be written

Runbooks enforces rules about where template-generated files can be written:

### Path restrictions

| Rule | Description |
|------|-------------|
| **Within working directory** | Output paths must resolve to locations within the working directory |
| **No directory traversal** | Output paths containing `..` (like `../../../etc/passwd`) are rejected |
| **No system directories** | Protected directories like `/etc`, `/usr`, `C:\Windows` are blocked |

<Aside type="note">
These restrictions apply to template output paths. Scripts executed via Command blocks have full filesystem access and can write anywhere the user has permissions.
</Aside>

### Protected directories

Runbooks blocks writes to system-critical directories:

- `/`, `/etc`, `/usr`, `/bin`, `/var`, `/home`, `/root`
- `C:\`, `C:\Windows`, `C:\Program Files`, `C:\Users`

## Next

Now that you understand how generated files work, explore the [use cases](/intro/use_cases/) where Runbooks shines.

