variables:
  - name: AWSAccounts
    description: A map of AWS account names to the account ID.
    type: map
    order: 1

  - name: OrgNamePrefix
    description: The name prefix to use for creating resources e.g S3 bucket for terraform state files
    type: string
    order: 2

  - name: DefaultRegion
    type: string
    description: The default region for AWS Resources
    default: us-east-1
    order: 3

  - name: SCMProviderRepo
    order: 4
    description: Either the github repository or gitlab project to use for the infrastructure-live repository. Gitlab projects should include any additional sub-groups in the name.
    type: string

  - name: DefaultTags
    description: The default tags to apply to all resources.
    type: map
    order: 5

  - name: CatalogRepositories
    description: List of the git repositories to populate for the catalog
    type: list
    order: 6

  - name: RootTerragruntFileName
    description: The name of the root terragrunt file to use at the root of the infrastructure-live repository
    type: string
    order: 7
    default: "root.hcl"

  - name: TerragruntVersion
    description: The version of Terragrunt to use
    type: string
    order: 8

  - name: OpenTofuVersion
    description: The version of OpenTofu to use
    type: string
    order: 9

  - name: AddAdditionalCommonVariables
    description: Whether to add additional common variables to the common.hcl file
    type: bool
    order: 10
    default: true

  - name: CatalogTags
    description: GitHub $org/$repo/contents/$path to a central tags file to deploy to all resources e.g. acme/repo/contents/path/to/tags.yml
    type: string
    order: 11
    default: ""

dependencies:
  - name: mise-config
    template-url: "{{ templateFolder }}/../mise-config"
    output-folder: "{{ outputFolder }}"

hooks:
  after:
    - command: ./update_accounts.sh
      dir: "{{ outputFolder }}"
