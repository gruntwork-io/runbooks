---
title: File Workspace Demo
---

# File Workspace

This runbook demonstrates the **file workspace** — a unified panel that shows cloned repositories, generated files, and tracked changes. It covers three scenarios: writing into a cloned repo (worktree), generating standalone files, and using both together.

---

## Part 1: Worktree Workspace

The worktree workspace shows the contents and changes of a cloned git repository. Files appear in the **All files** tab, and modifications appear in the **Changed** tab with a diff view.

### 1a. Clone a Repository

Start by cloning an example infrastructure-live repository. Once cloning completes, the **All files** tab opens automatically.

<GitClone
  id="clone-infra"
  title="Clone Infrastructure Live"
  description="Clone the example infrastructure-live repository"
  prefilledUrl="https://github.com/gruntwork-io/runbooks-infrastructure-live-example"
  prefilledLocalPath="./infra-live"
/>

<GitClone
  id="clone-test"
  title="Clone Infrastructure Live"
  description="Clone the runbooks-test repository"
  prefilledUrl="https://github.com/gruntwork-io/runbooks-test"
  prefilledLocalPath="./infra-test"
/>

### 1b. Modify a Cloned File with a Script

This script uses `$WORKTREE_FILES` to modify `root.hcl` and delete `CODEOWNERS` in the cloned repo. Both changes show up in the **Changed** tab — modifications as a diff, and deletions as a removed file.

<Command
  id="modify-repo"
  path="scripts/modify-repo.sh"
  title="Customize state bucket configuration"
  description="Uses $WORKTREE_FILES to modify root.hcl and remove CODEOWNERS."
  successMessage="root.hcl updated and CODEOWNERS removed! Check the Changed tab to review the diffs."
  failMessage="Failed to modify repository. Make sure Step 1a completed successfully."
/>

### 1c. Generate a File into the Worktree with a Template

Templates can also write directly into the cloned repo using `target="worktree"`. This creates a new file that appears in both the **All files** and **Changed** tabs.

<Inputs id="env-config">
```yaml
variables:
  - name: AccountName
    type: string
    description: Name of the AWS account
    default: dev-sandbox
  - name: Environment
    type: enum
    description: Deployment environment
    options: [dev, staging, prod]
    default: dev
```
</Inputs>

<TemplateInline inputsId="env-config" outputPath="docs/account.hcl" generateFile={true} target="worktree">
```hcl
# Account-level Terragrunt configuration
# Generated by Runbooks

locals {
  account_name = "{{ .AccountName }}"
  environment  = "{{ .Environment }}"
}
```
</TemplateInline>

---

## Part 2: Generated Files Workspace

The generated files workspace captures files written to `$GENERATED_FILES` or produced by templates. These appear in the **Generated** tab, separate from the cloned repository.

### 2a. Generate Files with a Command

This script writes a deployment configuration to `$GENERATED_FILES`. The file appears in the **Generated** tab.

<Command
  id="generate-config"
  path="scripts/generate-config.sh"
  title="Generate deployment config"
  description="Creates a deployment configuration file via $GENERATED_FILES."
  successMessage="Configuration generated! Check the Generated tab."
  failMessage="Failed to generate configuration."
/>

### 2b. Generate a File with a Template

Templates write to the generated files workspace by default (no `target` prop needed). The generated file appears in the **Generated** tab alongside the command output above.

<Template id="deploy-notes" path="templates/deploy-notes" inputsId="env-config" />

---

## Part 3: Both Together

At this point, all three tabs are populated:

- **All files** — The full file tree of the cloned repo, including `account.hcl` generated by the template in Part 1
- **Changed** — Diffs for `root.hcl` (modified), `CODEOWNERS` (deleted), and `account.hcl` (added by the template)
- **Generated** — `deploy-config.yaml` (from the command) and `deploy-notes.md` (from the template)

This demonstrates the full workflow: clone a repo, make changes to it, generate standalone artifacts, and review everything in one place before proceeding.
