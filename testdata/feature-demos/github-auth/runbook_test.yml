# Test configuration for github-auth
# Generated by: runbooks test init
# Edit this file to customize your tests.

version: 1

settings:
  # Generate files to a temp directory (cleaned up after test)
  use_temp_working_dir: true
  # Working directory for script execution (default: temp directory)
  # working_dir: "."  # Use "." for runbook directory, or specify a path
  # Test timeout
  timeout: 5m
  # Can this runbook's tests run in parallel with others?
  parallelizable: true

tests:
  - name: happy-path
    description: Standard successful execution

    inputs:
      # repo_url: string - the repository to clone
      repo-config.repo_url: "https://github.com/gruntwork-io/runbooks-test.git"
      # clone_path: string - relative path within temp working directory
      repo-config.clone_path: "./cloned-repo"

    steps:
      # Note: Order matters! Blocks that produce outputs must run before
      # blocks that consume them via {{ ._blocks.x.outputs.y }}
      # All blocks below are commented out, so this test runs all blocks
      # in document order. Uncomment specific blocks to run only those.

      # - block: gh-auth
      #   # Set expect: skip if not testing GitHub auth
      #   # Or set RUNBOOKS_GITHUB_TOKEN env var
      #   expect: skip

      # - block: verify-auth
      #   expect: success

      # - block: clone-repo
      #   expect: success

    assertions:
      # TemplateInline blocks automatically validate their output dependencies.
      # Add additional assertions to validate test results:
      # - type: file_exists
      #   path: generated/README.md
      # - type: file_contains
      #   path: generated/README.md
      #   contains: "expected content"

    # cleanup:
    #   - command: rm -rf /tmp/test-resources
    #   - path: cleanup/teardown.sh
