# Test configuration for runbook-testing feature demo
# Generated by: runbooks test init
# Edit this file to customize your tests.

version: 1

settings:
  # Generate files to a temp directory (cleaned up after test)
  use_temp_output: true
  # Test timeout
  timeout: 5m
  # Can this runbook's tests run in parallel with others?
  parallelizable: true

tests:
  - name: happy-path
    description: Standard successful execution

    inputs:
      # Name: string
      project-template.Name:
        fuzz:
          type: string
          minLength: 5
          maxLength: 20
      # Description: string
      project-template.Description:
        fuzz:
          type: string
          minLength: 5
          maxLength: 20
      # Language: enum [python, javascript, go, rust]
      project-template.Language:
        fuzz:
          type: enum
          options: [python, javascript, go, rust]
      # Name: string
      project.Name:
        fuzz:
          type: string
          minLength: 5
          maxLength: 20
      # Description: string
      project.Description:
        fuzz:
          type: string
          minLength: 5
          maxLength: 20
      # Language: enum [python, javascript, go, rust]
      project.Language:
        fuzz:
          type: enum
          options: [python, javascript, go, rust]

    steps:
      # Note: Order matters! create-project must run before verify-project
      # because verify-project checks the PROJECT_NAME env var set by create-project
      - block: check-git
        expect: success

      - block: create-project
        expect: success

      - block: verify-project
        # Skip: requires env vars from create-project which don't persist in headless mode
        expect: skip

    assertions:
      # Add assertions to validate test results
      # - type: file_exists
      #   path: generated/README.md
      # - type: file_contains
      #   path: generated/README.md
      #   contains: "expected content"
      # - type: files_generated
      #   block: project-template
      #   min_count: 1

    # cleanup:
    #   - command: rm -rf /tmp/test-resources
    #   - path: cleanup/teardown.sh
